# Next.js Builder

## Overview

Next.js Builder is a robust application designed to automate the process of creating and managing web applications built with Next.js. This tool enables users to generate pages, APIs, and database schemas interactively through a multi-step interface. Additionally, it integrates seamlessly with a backend deployment server to automatically deploy projects to Vercel and manage databases using Supabase.

## Table of Contents

- [Prerequisites](#prerequisites)
- [Installation](#installation)
- [Usage](#usage)
- [Environment Variables](#environment-variables)
- [Components Overview](#components-overview)
- [Deployment Workflow](#deployment-workflow)
- [License](#license)
- [Important Notes](#important-notes)

## Prerequisites

Before using this application, ensure that you have the following prerequisites installed and configured:

- **Node.js** (v14.x or higher) and npm/yarn.
- Accounts with [Vercel](https://vercel.com/) and [Supabase](https://supabase.com/).
- A [ngrok](https://ngrok.com/) account for tunneling (for the deployment server).

## Installation

To set up the project, follow these steps:

1. **Clone the Repository:**

    ```bash
    git clone https://github.com/yourusername/nextjs-builder.git
    cd nextjs-builder
    ```

2. **Install Dependencies:**

    ```bash
    npm install
    # or
    yarn install
    ```

3. **Set Up Environment Variables:**

    Create a `.env.local` file in the root directory and configure the following environment variables:

    ```bash
    SPARK_API_KEY=your-spark-api-key
    NGROK_DEPLOYER_URL=your-ngrok-deployer-url
    ```

4. **Deploy the Application to Vercel:**

    **Note:** The Next.js Builder application must be deployed on Vercel to function correctly. Follow these steps to deploy it:

    - Install the Vercel CLI:
      ```bash
      npm install -g vercel
      ```

    - Log in to Vercel:
      ```bash
      vercel login
      ```

    - Deploy the application:
      ```bash
      vercel --prod
      ```

    After deployment, make sure to update the `NGROK_DEPLOYER_URL` in your `.env.local` file with the URL provided by ngrok (as described in the [Important Notes](#important-notes) section below).

5. **Run the Development Server (Optional):**

    If you want to run the application locally for development:
    
    ```bash
    npm run dev
    # or
    yarn dev
    ```

    The application will be accessible at [http://localhost:3000](http://localhost:3000).

## Usage

### Project Creation

1. **Start a New Project:** Use the multi-step form to enter your project's details, including its name, type (single or multiple pages), colors, logos, and purpose.
   
2. **Generate Pages and Components:** Define the pages and their components. Customize the styling as needed.

3. **Create and Manage APIs:** Automatically generate and manage serverless APIs based on your project’s specifications.

4. **Define Database Schema:** Review and modify the database schema generated by the application to ensure it aligns with your project requirements.

### Deployment

Once your project is ready, you can deploy it directly using the integrated deployment server. The server manages the deployment process, integrates with Vercel, and handles environment variables and database setup on Supabase.

### Environment Variables
-SPARK_API_KEY: Your Spark API key for code generation.
-NGROK_DEPLOYER_URL: The URL of the deployment server managed via ngrok.

Ensure these variables are set in the .env.local file for the application to function correctly.

### Components Overview
-Dashboard.js: The main interface where users manage project creation, page design, API setup, and database schema management.
-ErrorBoundary.js: Captures errors in the UI and allows users to regenerate components or APIs.
-MultiStepForm.js: Collects initial project information from the user through a multi-step form.
-ProjectDashboard.js: Displays and manages all aspects of the project, including page rendering, code editing, and deployment.

### Deployment Workflow
1. Create and Customize Your Project: Follow the step-by-step process in the application to create and customize your Next.js project.
2. Deploy Using the Backend Server: Once the project is ready, use the /deploy endpoint of the backend server to deploy the project to Vercel and manage the Supabase database. The backend server handles the deployment process, including managing environment variables and executing SQL scripts.
3. Monitor and Update: Use the application’s dashboard to monitor and update your project as needed, with options to regenerate components and redeploy.

### Important Notes
1. Cloning the Backend Deployment Server
If you want to automatically deploy your projects to Vercel and manage databases with Supabase, you will need to clone and set up the backend deployment server. Follow these steps:

Clone the Backend Deployment Server Repository:
1. 
```bash
git clone https://github.com/spark-engine-opensource-projects/Automated-NextJS-deployer-to-vercel-and-supabase.git
cd Automated-NextJS-deployer-to-vercel-and-supabase
```

2. Set Up and Start the Server:

Follow the instructions in the backend server's README to install dependencies, set environment variables, and start the server.

Update the NGROK_DEPLOYER_URL:

Once the backend server is running and ngrok is tunneling, update the NGROK_DEPLOYER_URL in your Next.js Builder .env.local file with the URL provided by ngrok.

2. Deployment Requirement for Frontend Next.js Builder
The frontend Next.js Builder application must be deployed to Vercel to function properly. This is because the application relies on Vercel's infrastructure for dynamic API generation and hosting. Follow the deployment instructions provided above to ensure the application is correctly hosted.

### License
This project is licensed under the MIT License. See the LICENSE file for details.
